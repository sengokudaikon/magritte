[package]
name = "magritte"
version = "0.1.0"
edition = "2021"
description = "A powerful ORM with QueryBuilder for SurrealDB, inspired by SeaORM"
authors = ["Daniil Zavrin <hanamik0@proton.me>"]
license = "MIT OR Apache-2.0"

[dependencies]
async-stream = { version = "0.3", default-features = false }
async-trait = { version = "0.1", default-features = false }
chrono = { version = "0.4.30", default-features = false, optional = true }
time = { version = "0.3.36", default-features = false, optional = true }
futures = { version = "0.3", default-features = false, features = ["std"] }
log = { version = "0.4", default-features = false }
tracing = { version = "0.1", default-features = false, features = ["attributes", "log"] }
serde = { version = "1.0", features = ["derive"] }
serde_json = { version = "1.0", optional = true }
thiserror = "2.0.3"
anyhow = "1.0"
strum = { version = "0.26.3",features = ["derive"] }
rust_decimal = { version = "1.36.0", optional = true }
bigdecimal = { version = "0", optional = true }
geo = { version = "0.29.2",optional = true }
uuid = { version = "1.11.0", features = ["v4","v6"], optional = true }
tokio = { version = "1.41.1", features = ["full"], optional = true}
async-std = { version = "1.13.0", features = ["default"],optional = true }
magritte_macros = { version = "0", path = "magritte_macros", default-features = false }
magritte_query = { version = "0", path = "magritte_query", default-features = false }
surrealdb = { version = "2", features = ["default","scripting","ml"] }

[dev-dependencies]
criterion = "0.5.1"
inferno = "0"
smol = { version = "2.0.2" }
smol-potat = { version = "1.1" }
async-std = { version = "1", features = ["attributes", "tokio1"] }
futures = { version = "0.3" }
tokio = { version = "1.6", features = ["full"] }
maplit = { version = "1" }
tracing-subscriber = { version = "0.3.17", features = ["env-filter"] }
pretty_assertions = { version = "1.4.1" }
time = { version = "0.3.36", features = ["macros"] }
uuid = { version = "1", features = ["v4","v6"] }
once_cell = "1.8"
arraystring = "0.3"
dotenv = "0.15"
magritte_query = { path = "magritte_query", features = ["tests-cfg"] }


[[test]]
name = "unit"
path = "tests/unit/mod.rs"
required-features = ["tests-cfg"]

[[test]]
name = "functional"
path = "tests/functional/mod.rs"
required-features = ["tests-cfg"]

[[bench]]
name = "basic"
harness = false


[features]
default = [
    "with-json",
    "with-chrono",
    "with-rust_decimal",
    "with-bigdecimal",
    "with-uuid",
    "with-time",
]
mock = ["surrealdb/arbitrary"]
proxy = ["serde_json", "serde/derive"]
with-json = ["serde_json", "chrono?/serde", "rust_decimal?/serde", "bigdecimal?/serde", "uuid?/serde", "time?/serde"]
with-chrono = ["chrono","magritte_query/with-chrono", "magritte_macros/with-chrono"]
with-rust_decimal = ["rust_decimal", "magritte_query/with-rust_decimal", "magritte_macros/with-rust_decimal"]
with-bigdecimal = ["bigdecimal", "magritte_macros/with-bigdecimal", "magritte_query/with-bigdecimal"]
with-uuid = ["uuid", "magritte_macros/uuid", "magritte_query/uuid"]
with-time = ["time", "magritte_query/with-time", "magritte_macros/with-time"]
runtime-async-std = ["async-std"]
runtime-async-std-native-tls = ["surrealdb/native-tls", "runtime-async-std"]
runtime-async-std-rustls = ["surrealdb/rustls", "runtime-async-std"]
runtime-tokio = ["tokio"]
runtime-tokio-native-tls = ["surrealdb/native-tls", "runtime-tokio"]
runtime-tokio-rustls = ["surrealdb/rustls", "runtime-tokio"]
tests-cfg = ["serde/derive"]
full = ["default", "rust_decimal","uuid","geo"]